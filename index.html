<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vos courses √† domicile ‚Äì Commande / Service (Philippeville)</title>
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  <meta name="description" content="Commandes de courses √† domicile et accompagnement m√©dical dans la r√©gion de Philippeville. Simple, rapide et local.">
  <style>
    :root { --bg:#f9f6f1; --card:#ffffff; --accent:#1f7a38; --accent-2:#bfe6c8; --text:#111111; --muted:#385245; --danger:#b71c1c; --focus:#ffcc00; --shadow:0 10px 28px rgba(0,0,0,.08); --radius:20px; --radius-lg:24px; --font-base:18px; --font-big:20px; }
    html, body { height:100%; background:var(--bg); color:var(--text); font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; font-size:var(--font-base); line-height:1.55; }
    *{ box-sizing:border-box; }
    .container{ max-width:800px; margin:28px auto 64px; padding:0 16px; }
    header{ text-align:center; margin-bottom:18px; }
    header .badge{ display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:999px; background:#e8f6ee; color:var(--accent); font-weight:700; font-size:1rem; }
    header h1{ margin:10px 0 6px; font-size:clamp(1.8rem, 1.2rem + 2vw, 2.4rem); letter-spacing:.2px; }
    header p{ margin:0; color:var(--muted); }
    .card{ background:var(--card); border-radius:var(--radius-lg); box-shadow:var(--shadow); padding:24px; }
    .step{ display:flex; align-items:center; gap:12px; margin:18px 0 12px; }
    .step .num{ width:38px; height:38px; border-radius:50%; background:var(--accent); color:#fff; display:grid; place-items:center; font-weight:800; font-size:1.1rem; }
    .step h2{ margin:0; color:var(--accent); font-size:1.3rem; }
    fieldset{ border:none; padding:0; margin:0 0 16px; }
    .hint{ font-size:0.95rem; color:var(--muted); margin:6px 0 10px; }
    label{ display:block; margin:10px 0 8px; font-weight:700; font-size:var(--font-big); }
    .required::after{ content:" *"; color:var(--danger); font-weight:900; }
    input[type=text], input[type=tel], input[type=email], input[type=datetime-local], textarea, select, input[type=date], input[type=time]{ width:100%; padding:14px 16px; border-radius:16px; border:2px solid #dbe7df; background:#fff; font-size:1.05rem; }
    textarea{ min-height:120px; resize:vertical; }
    .highlight{ background:#fffbe6; border:2px solid #ffe08a; padding:14px; border-radius:16px; }
    .service-box{ background:var(--accent-2); border:2px solid #9edbb0; border-radius:20px; padding:16px; text-align:center; }
    .service-box .intro{ font-weight:800; margin-bottom:8px; font-size:1.15rem; }
    .plans{ display:grid; gap:10px; max-width:520px; margin:0 auto; }
    .plan{ background:#fff; border:2px solid #9edbb0; border-radius:16px; padding:12px 14px; display:flex; align-items:center; gap:12px; justify-content:center; }
    .star{ font-size:1.2rem; color:#d4a017; }
    .plan input{ width:22px; height:22px; accent-color:var(--accent); }
    .choices{ display:grid; grid-template-columns:1fr; gap:12px; }
    .chip{ display:flex; align-items:center; gap:12px; border:2px solid #dbe7df; padding:14px 16px; border-radius:16px; background:#fff; cursor:pointer; }
    .chip input{ width:22px; height:22px; accent-color:var(--accent); }
    .divider{ height:2px; background:#e4efe8; margin:18px 0; border-radius:2px; }
    .actions{ display:grid; gap:10px; justify-items:center; margin-top:18px; }
    .btn{ appearance:none; border:none; border-radius:999px; padding:16px 22px; font-weight:900; cursor:pointer; font-size:1.1rem; }
    .btn-primary{ background:var(--accent); color:#fff; box-shadow:0 8px 18px rgba(31,122,56,.25); }
    .btn-ghost{ background:#eaf7ee; color:var(--accent); border:2px solid var(--accent); border-radius:14px; font-weight:800; }
    .btn-whatsapp{ background:#25D366; color:#fff; width:min(560px, 100%); }
    .btn-email{ background:#ffffff; color:var(--accent); border:2px solid var(--accent); width:min(520px, 100%); }
    details{ background:#f5fbf6; border:2px solid #d3ead9; border-radius:16px; padding:14px 16px; }
    details[open] summary{ border-bottom:2px dashed #d3ead9; padding-bottom:8px; margin-bottom:10px; }
    details summary{ cursor:pointer; font-weight:900; color:var(--accent); font-size:1.1rem; }
    details ul{ list-style:none; padding:0; margin:0; display:grid; gap:8px; }
    details li{ display:flex; justify-content:space-between; gap:12px; font-size:1.05rem; }
    :is(input, select, textarea, button):focus-visible{ outline:4px solid var(--focus); outline-offset:2px; }
    .captcha{ display:grid; grid-template-columns:1fr 200px; gap:12px; align-items:end; }
    @media (max-width: 540px){ .captcha{ grid-template-columns:1fr; } }
    #toast{ position:fixed; left:50%; bottom:18px; transform:translateX(-50%); background:#1f7a38;
      background-image: linear-gradient(to bottom, rgba(255,255,255,0.18), rgba(255,255,255,0.18));
      color:#fff; padding:16px 20px; border-radius:20px; box-shadow:0 8px 20px rgba(0,0,0,.2); opacity:0; pointer-events:none; transition:opacity .25s ease; font-weight:800; text-align:center; max-width:min(90vw, 720px); }
    #toast.show{ opacity:1; }
    #toast small{ display:block; font-weight:600; opacity:.95; }
  </style>
</head>
<body>
  <div class="container">
    <header>
<div style="margin:10px 0;"><a href="tel:+32494118682" class="btn btn-primary" style="display:inline-block;text-decoration:none;">üìû Appeler maintenant</a></div>
      <div class="badge">Vos courses √† domicile ‚Ä¢ R√©gion de Philippeville</div>
      <h1>Simple, rapide et local</h1>
      <p>Commandez avant midi et recevez vos courses le jour m√™me (selon disponibilit√©). Service humain, rapide et flexible.</p>
    </header>

    <main class="card" role="main">
      <form id="orderForm" novalidate>
        <div class="step" aria-label="√âtape 1"><div class="num">1</div><h2>Choisissez votre service</h2></div>
        <div class="service-box" aria-labelledby="service-legend">
          <div class="intro">Choisissez la formule qui vous convient le mieux üëá</div>
          <fieldset class="plans">
            <label class="plan"><input type="radio" name="service" value="Essentielle" required aria-required="true"><span class="star">‚≠ê</span><span><strong>Essentielle</strong> ‚Äî 1 livraison / semaine (15 ‚Ç¨)</span></label>
            <label class="plan"><input type="radio" name="service" value="Confort"><span class="star">‚≠ê‚≠ê</span><span><strong>Confort</strong> ‚Äî 2 livraisons / semaine (20 ‚Ç¨)</span></label>
            <label class="plan"><input type="radio" name="service" value="S√©r√©nit√©"><span class="star">‚≠ê‚≠ê‚≠ê</span><span><strong>S√©r√©nit√©</strong> ‚Äî 3 livraisons / semaine (25 ‚Ç¨)</span></label>
          </fieldset>
          <div class="hint" style="margin-top:8px;text-align:center;border-top:1px solid #cfe9d6;padding-top:8px;">Besoin d‚Äôaide pour choisir ? Appelez-nous au <strong>0494 / 11.86.82</strong>.</div>
        </div>

        <div class="divider" role="separator" aria-hidden="true"></div>

        <div class="step" aria-label="√âtape 2"><div class="num">2</div><h2>Vos commerces et services</h2></div>
        <p class="hint">Vous pouvez cocher plusieurs arr√™ts : boulangerie, boucherie, ferme, pharmacie, supermarch√©. Vous pouvez aussi ajouter un accompagnement m√©dical (10 ‚Ç¨/h + 0,50 ‚Ç¨/km aller‚Äëretour).</p>
        <fieldset class="choices highlight" aria-labelledby="shops-legend">
          <legend id="shops-legend" class="sr-only" style="position:absolute;left:-9999px">Commerces et services</legend>
          <label class="chip"><input type="checkbox" name="shops" value="Boulangerie"> Boulangerie</label>
          <label class="chip"><input type="checkbox" name="shops" value="Boucherie"> Boucherie</label>
          <label class="chip"><input type="checkbox" name="shops" value="Ferme"> Ferme</label>
          <label class="chip"><input type="checkbox" name="shops" value="Pharmacie"> Pharmacie</label>
          <label class="chip"><input type="checkbox" name="shops" value="Supermarch√©"> Supermarch√©</label>
          <label class="chip"><input type="checkbox" id="medAssist" name="medAssist" value="Accompagnement m√©dical"> Accompagnement m√©dical (10 ‚Ç¨/h + 0,50 ‚Ç¨/km aller‚Äëretour)</label>
        </fieldset>

        <div id="medBlock" class="highlight" style="display:none;margin-top:10px;">
          <label class="required" for="apptDate">Date du rendez-vous</label>
          <input type="date" id="apptDate" name="apptDate" aria-describedby="med-hint">
          <label class="required" for="apptTime">Heure du rendez-vous</label>
          <input type="time" id="apptTime" name="apptTime">
          <label class="required" for="apptPlace">Lieu du rendez-vous (adresse compl√®te)</label>
          <input type="text" id="apptPlace" name="apptPlace" placeholder="Cabinet, clinique, adresse‚Ä¶">
          <label for="hours">Dur√©e estim√©e (heures)</label>
          <input type="text" id="hours" name="hours" inputmode="numeric" placeholder="Ex. 2,0" aria-describedby="med-hint">
          <p id="med-hint" class="hint">Nous vous emmenons, attendons sur place, puis vous raccompagnons √† votre domicile.</p>
        </div>

        <div class="divider"></div>

        <div class="step" aria-label="√âtape 3"><div class="num">3</div><h2>Votre liste et vos documents</h2></div>
        <label for="list">Liste / ordonnances / marques souhait√©es</label>
        <textarea id="list" name="list" placeholder="Ex. Pain complet chez Dupont ‚Ä¢ 500 g de hach√© maigre ‚Ä¢ L√©gumes de saison √† la ferme ‚Ä¢ Parac√©tamol 1 g (ordonnance)‚Ä¶"></textarea>

        <label for="photos">Joindre des photos (liste manuscrite, produit, ordonnance) ‚Äì JPG, PNG ou PDF</label>
        <input id="photos" name="photos" type="file" accept="image/png,image/jpeg,application/pdf" multiple />
        <p class="hint">Astuce : vos photos ne peuvent pas √™tre jointes automatiquement via e‚Äëmail/WhatsApp. Elles seront list√©es dans votre message pour que vous puissiez les <strong>ajouter en pi√®ce jointe</strong>.</p>

        <label class="required" for="slot">Cr√©neau souhait√©</label>
        <select id="slot" name="slot" required aria-required="true">
          <option value="">‚Äî Choisir ‚Äî</option>
          <option>Livraison aujourd‚Äôhui (commande pass√©e avant 12h)</option>
          <option>Livraison demain matin</option>
          <option>Livraison demain apr√®s-midi</option>
          <option>Livraison √† une autre date (√† pr√©ciser)</option>
        </select>

        <div class="divider"></div>

        <div class="step" aria-label="√âtape 4"><div class="num">4</div><h2>Vos coordonn√©es</h2></div>
        <label class="required" for="name">Nom et pr√©nom</label>
        <input id="name" name="name" type="text" required aria-required="true" />
        <label class="required" for="phone">T√©l√©phone</label>
        <input id="phone" name="phone" type="tel" placeholder="0494/11.86.82" required aria-required="true" />
        <label for="email">Adresse e‚Äëmail (facultative)</label>
        <input id="email" name="email" type="email" placeholder="votre@email.be" />
        <label class="required" for="address">Adresse compl√®te (r√©gion de Philippeville)</label>
        <input id="address" name="address" type="text" placeholder="Rue, num√©ro, code postal, localit√©" required aria-required="true" />
        <label for="notes">Commentaires pour la livraison</label>
        <textarea id="notes" name="notes" placeholder="Digicode, √©tage, sonnette, pr√©f√©rences‚Ä¶"></textarea>

        <div class="divider"></div>

        <div class="step" aria-label="√âtape 5"><div class="num">5</div><h2>V√©rification et envoi</h2></div>
        <div class="captcha highlight" role="group" aria-labelledby="capLabel">
          <label id="capLabel" for="capAnswer">Combien font <span id="capQ">‚Äî</span> ?</label>
          <input id="capAnswer" name="capAnswer" type="text" inputmode="numeric" placeholder="Votre r√©ponse" required aria-required="true" />
          <input type="hidden" id="capExpected" />
        </div>

        <label class="chip" style="margin-top:12px"><input type="checkbox" id="policy" required aria-required="true"> <span>J‚Äôaccepte que mes donn√©es soient utilis√©es pour organiser ma commande (non partag√©es √† des tiers).</span></label>

        <div class="actions"><p class="hint" style="text-align:center;margin:0 0 6px;">‚ö†Ô∏è Vos photos ne peuvent pas √™tre jointes automatiquement. <strong>Ajoutez-les en pi√®ce jointe dans WhatsApp</strong> apr√®s l‚Äôenvoi.</p><button class="btn btn-whatsapp" type="button" id="waBtn" aria-label="Envoyer via WhatsApp">Envoyer via WhatsApp</button><button class="btn btn-ghost" type="button" id="previewBtn" aria-label="Voir l'aper√ßu">Aper√ßu</button></div>

        <details id="recapBox" open style="margin-top:16px">
          <summary>R√©capitulatif de votre demande</summary>
          <ul>
            <li><span>Service</span><strong id="recapService">‚Äî</strong></li>
            <li><span>Commerces / services</span><strong id="recapShops">‚Äî</strong></li>
            <li id="recapMedRow" style="display:none"><span>Rendez-vous m√©dical</span><strong id="recapMed">‚Äî</strong></li>
            <li id="recapFilesRow" style="display:none"><span>Pi√®ces jointes</span><strong id="recapFiles">‚Äî</strong></li>
            <li><span>Cr√©neau</span><strong id="recapSlot">‚Äî</strong></li>
            <li><span>Adresse</span><strong id="recapAddress">‚Äî</strong></li>
          </ul>
        </details>
      </form>
    </main>

    <footer>¬© Vos courses √† domicile ‚Äì Philippeville ‚Ä¢ Zone couverte : r√©gion de Philippeville</footer>
  </div>

  <div id="toast" role="status" aria-live="polite" aria-atomic="true"></div>

  <script>
    const form = document.getElementById('orderForm');
    const recapService = document.getElementById('recapService');
    const recapShops = document.getElementById('recapShops');
    const recapSlot = document.getElementById('recapSlot');
    const recapAddress = document.getElementById('recapAddress');

    const medAssist = document.getElementById('medAssist');
    const medBlock = document.getElementById('medBlock');
    const recapMedRow = document.getElementById('recapMedRow');
    const recapMed = document.getElementById('recapMed');

    const photos = document.getElementById('photos');
    const recapFilesRow = document.getElementById('recapFilesRow');
    const recapFiles = document.getElementById('recapFiles');

    const capQ = document.getElementById('capQ');
    const capAnswer = document.getElementById('capAnswer');
    const capExpected = document.getElementById('capExpected');

    const waBtn = document.getElementById('waBtn');
const previewBtn = document.getElementById('previewBtn');

    function beep(){
      try{
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = 'sine';
        o.frequency.value = 880;
        o.connect(g); g.connect(ctx.destination);
        g.gain.setValueAtTime(0.0001, ctx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.05, ctx.currentTime + 0.02);
        o.start();
        setTimeout(()=>{ g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.02); o.stop(); ctx.close(); }, 220);
      }catch(e){}
    }

    function showToast(html){
      const toast = document.getElementById('toast');
      toast.innerHTML = html;
      toast.classList.add('show');
      beep();
      setTimeout(()=> toast.classList.remove('show'), 5000);
    }

    function makeCaptcha(){
      const a = Math.floor(1 + Math.random()*9);
      const b = Math.floor(1 + Math.random()*9);
      capQ.textContent = `${a} + ${b}`;
      capExpected.value = (a + b).toString();
      capAnswer.value = '';
    }

    function updateRecap(){
      const service = form.service.value || '‚Äî';
      const shops = [...form.querySelectorAll('input[name="shops"]:checked')].map(x=>x.value);
      const slot = form.slot.value || '‚Äî';
      const address = form.address.value || '‚Äî';

      recapService.textContent = service;
      recapShops.textContent = shops.length ? shops.join(', ') + (medAssist.checked ? ', Accompagnement m√©dical' : '') : (medAssist.checked ? 'Accompagnement m√©dical' : '‚Äî');
      recapSlot.textContent = slot;
      recapAddress.textContent = address;

      if(medAssist.checked){
        const d = form.apptDate?.value ? new Date(form.apptDate.value) : null;
        const dateStr = d ? d.toLocaleDateString('fr-BE') : 'date non pr√©cis√©e';
        const timeStr = form.apptTime?.value || 'heure non pr√©cis√©e';
        const place = form.apptPlace?.value || 'lieu non pr√©cis√©';
        const hours = form.hours?.value || '‚Äî';
        recapMed.textContent = `${dateStr} ‚Ä¢ ${timeStr} ‚Ä¢ ${place} ‚Ä¢ dur√©e estim√©e : ${hours} h (10 ‚Ç¨/h + 0,50 ‚Ç¨/km AR)`;
        recapMedRow.style.display = '';
      } else {
        recapMed.textContent = '‚Äî';
        recapMedRow.style.display = 'none';
      }

      if(photos.files && photos.files.length){
        const names = [...photos.files].map(f=>`${f.name} (${Math.round(f.size/1024)} Ko)`).join(', ');
        recapFiles.textContent = names;
        recapFilesRow.style.display = '';
      } else {
        recapFiles.textContent = '‚Äî';
        recapFilesRow.style.display = 'none';
      }
    }

    function toggleMed(){ medBlock.style.display = medAssist.checked ? '' : 'none'; }

    document.addEventListener('input', ()=>{ toggleMed(); updateRecap(); });
    document.addEventListener('change', ()=>{ toggleMed(); updateRecap(); });
    photos.addEventListener('change', updateRecap);

    document.addEventListener('DOMContentLoaded', ()=>{ makeCaptcha(); toggleMed(); updateRecap(); document.getElementById('recapBox').open = true; });

    previewBtn.addEventListener('click', ()=>{
      updateRecap();
      document.getElementById('recapBox').open = true;
      showToast('üîç Aper√ßu mis √† jour');
    });

    function buildMessage(){
      updateRecap();
      const shops = [...form.querySelectorAll('input[name="shops"]:checked')].map(x=>x.value).join(', ');
      const files = photos.files && photos.files.length ? [...photos.files].map(f=>f.name).join(', ') : '‚Äî';
      const medLine = medAssist.checked ? `\nRendez-vous m√©dical : ${form.apptDate.value} ${form.apptTime.value} ‚Ä¢ ${form.apptPlace.value} ‚Ä¢ Dur√©e estim√©e : ${form.hours.value || '‚Äî'} h` : '';
      return `Commande / Service ‚Äì Vos courses √† domicile (Philippeville)

`+
`(Merci d‚Äôajouter vos photos en pi√®ce jointe dans WhatsApp)

`+
        `Service : ${form.service.value || '‚Äî'}\n`+
        `Commerces/Services : ${shops || '‚Äî'}${medAssist.checked ? ', Accompagnement m√©dical' : ''}\n`+
        `Cr√©neau : ${form.slot.value || '‚Äî'}\n`+
        `Nom : ${form.name.value || '‚Äî'}\n`+
        `T√©l√©phone : ${form.phone.value || '‚Äî'}\n`+
        `Email : ${form.email.value || '‚Äî'}\n`+
        `Adresse : ${form.address.value || '‚Äî'}\n`+
        `Liste / Ordonnances / Notes : ${form.list.value || '‚Äî'}\n`+
        `Pi√®ces √† joindre : ${files}\n`+
        medLine + `\n`;
    }

    function validateAll(){
      if(!form.checkValidity()){
        showToast('‚ùó Champs requis manquants');
        return false;
      }
      if(capAnswer.value.trim() !== capExpected.value){
        showToast('‚ùó Anti‚Äërobot incorrect');
        makeCaptcha();
        return false;
      }
      if(medAssist.checked){
        if(!form.apptDate.value || !form.apptTime.value || !form.apptPlace.value){
          showToast('‚ùó RDV m√©dical incomplet');
          return false;
        }
      }
      return true;
    }

    waBtn.addEventListener('click', ()=>{
      if(!validateAll()) return;
      const text = encodeURIComponent(buildMessage());
      const phone = '32494118682';
      const url = `https://wa.me/${phone}?text=${text}`;
      showToast('‚úÖ <strong>Votre commande a bien √©t√© envoy√©e.</strong><br>Merci d‚Äôavoir fait appel √† notre service local !<br>üìû Nous vous recontacterons dans les plus brefs d√©lais pour la confirmer.<br><em>‚Äî L‚Äô√©quipe Vos Courses √† Domicile Philippeville ‚Ä¢ 0494 / 11.86.82</em>');
      window.open(url, '_blank');
    });

    </script>
</body>
</html>
